"use strict";var Input=ReactBootstrap.Input,Button=ReactBootstrap.Button,Modal=ReactBootstrap.Modal,Container=React.createClass({displayName:"Container",mixins:[ReactBootstrap.OverlayMixin],getInitialState:function(){return{modalState:!1,modalMessage:""}},_toggleModalWindow:function(t){this.setState({modalState:!this.state.modalState,modalMessage:t||""})},_submit:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e=this,a="title="+t.target.querySelector("#mystory-title").value+"&text="+encodeURIComponent(t.target.querySelector("#mystory-text").value)+"&grecaptcha="+grecaptcha.getResponse(),n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&(200!==this.status?e._toggleModalWindow(this.responseText):window.location="/")},n.open("POST","/createStory"),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(a)},componentDidMount:function t(){window.grecaptcha?window.grecaptcha.render("captcha",{sitekey:"6LcfSQITAAAAAE_LpS_ldiBZy94ly9-AJrGErt4l"}):setTimeout(t,2e3)},render:function(){return React.createElement("form",{onSubmit:this._submit},React.createElement(Input,{id:"mystory-title",type:"text",label:"Заглавие"}),React.createElement(Input,{id:"mystory-text",type:"textarea",label:"История",rows:"20"}),React.createElement("div",{className:"mystory-submit-box"},React.createElement("div",{id:"captcha"}),React.createElement(Input,{className:"mystory-submit-button",type:"submit",bsStyle:"success",value:"Отправить"})))},renderOverlay:function(){return this.state.modalState?React.createElement(Modal,{title:"Внимание!",onRequestHide:this._toggleModalWindow},React.createElement("div",{className:"modal-body"},this.state.modalMessage),React.createElement("div",{className:"modal-footer"},React.createElement(Button,{bsStyle:"primary",onClick:this._toggleModalWindow},"Вернуться"))):React.createElement("span",null)}});React.render(React.createElement(Container,null),document.getElementById("content-container"));